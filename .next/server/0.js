exports.ids = [0];
exports.modules = {

/***/ "./db.js":
/*!***************!*\
  !*** ./db.js ***!
  \***************/
/*! exports provided: getPlaces, selectUserByUsername, insertUser, selectSessionByToken, deleteSessionByToken, insertSession, insertJourney, insertJourneyEntries */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getPlaces\", function() { return getPlaces; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectUserByUsername\", function() { return selectUserByUsername; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"insertUser\", function() { return insertUser; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectSessionByToken\", function() { return selectSessionByToken; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"deleteSessionByToken\", function() { return deleteSessionByToken; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"insertSession\", function() { return insertSession; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"insertJourney\", function() { return insertJourney; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"insertJourneyEntries\", function() { return insertJourneyEntries; });\n__webpack_require__(/*! dotenv */ \"dotenv\").config();\n\nconst argon2 = __webpack_require__(/*! argon2 */ \"argon2\");\n\nconst postgres = __webpack_require__(/*! postgres */ \"postgres\");\n\nconst sql = postgres();\nasync function getPlaces() {\n  const places = await sql`\n    select * from places\n  `;\n  return places;\n}\nasync function selectUserByUsername(username, password) {\n  const usersWithUsername = await sql`\n  SELECT * FROM users WHERE username = ${username}\n  `; //select from always returns an array, even if its one\n  // console.log(usersWithUsername[0]);\n\n  if (usersWithUsername.length === 0) return usersWithUsername;\n  const passwordMatches = await argon2.verify(usersWithUsername[0].password_hash, password); //this returns boolean\n\n  if (passwordMatches) {\n    return usersWithUsername;\n  } else {\n    return [];\n  }\n}\nasync function insertUser(username, passwordHash) {\n  return sql`\n    INSERT INTO users (username, password_hash) VALUES (${username}, ${passwordHash})\n  `;\n}\nasync function selectSessionByToken(token) {\n  return sql`\n    SELECT * FROM sessions WHERE token = ${token}\n  `;\n}\nasync function deleteSessionByToken(token) {\n  return sql`\n    DELETE FROM sessions WHERE token = ${token}\n  `;\n}\nasync function insertSession(userId, token) {\n  return sql`\n    INSERT INTO sessions (user_id, token) VALUES (${userId}, ${token})\n  `;\n}\nasync function insertJourney(startDate, endDate, userId) {\n  return sql`\n    INSERT INTO journeys (start_date, end_date, user_id) VALUES (${startDate}, ${endDate}, ${userId}) RETURNING id, start_date, end_date, user_id\n  `;\n}\nasync function insertJourneyEntries(journeyId, placeId, date) {\n  return sql`\n    INSERT INTO journeyentries (journey_id, place_id, date, order) VALUES (${journeyId}, ${placeId}, ${date})\n  `;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9kYi5qcz8yNmY1Il0sIm5hbWVzIjpbInJlcXVpcmUiLCJjb25maWciLCJhcmdvbjIiLCJwb3N0Z3JlcyIsInNxbCIsImdldFBsYWNlcyIsInBsYWNlcyIsInNlbGVjdFVzZXJCeVVzZXJuYW1lIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsInVzZXJzV2l0aFVzZXJuYW1lIiwibGVuZ3RoIiwicGFzc3dvcmRNYXRjaGVzIiwidmVyaWZ5IiwicGFzc3dvcmRfaGFzaCIsImluc2VydFVzZXIiLCJwYXNzd29yZEhhc2giLCJzZWxlY3RTZXNzaW9uQnlUb2tlbiIsInRva2VuIiwiZGVsZXRlU2Vzc2lvbkJ5VG9rZW4iLCJpbnNlcnRTZXNzaW9uIiwidXNlcklkIiwiaW5zZXJ0Sm91cm5leSIsInN0YXJ0RGF0ZSIsImVuZERhdGUiLCJpbnNlcnRKb3VybmV5RW50cmllcyIsImpvdXJuZXlJZCIsInBsYWNlSWQiLCJkYXRlIl0sIm1hcHBpbmdzIjoiQUFBQUE7QUFBQUE7QUFBQUE7QUFBQUE7QUFBQUE7QUFBQUE7QUFBQUE7QUFBQUE7QUFBQUE7QUFBQUEsbUJBQU8sQ0FBQyxzQkFBRCxDQUFQLENBQWtCQyxNQUFsQjs7QUFFQSxNQUFNQyxNQUFNLEdBQUdGLG1CQUFPLENBQUMsc0JBQUQsQ0FBdEI7O0FBQ0EsTUFBTUcsUUFBUSxHQUFHSCxtQkFBTyxDQUFDLDBCQUFELENBQXhCOztBQUNBLE1BQU1JLEdBQUcsR0FBR0QsUUFBUSxFQUFwQjtBQUVPLGVBQWVFLFNBQWYsR0FBMkI7QUFDaEMsUUFBTUMsTUFBTSxHQUFHLE1BQU1GLEdBQUk7O0dBQXpCO0FBR0EsU0FBT0UsTUFBUDtBQUNEO0FBRU0sZUFBZUMsb0JBQWYsQ0FBb0NDLFFBQXBDLEVBQThDQyxRQUE5QyxFQUF3RDtBQUM3RCxRQUFNQyxpQkFBaUIsR0FBRyxNQUFNTixHQUFJO3lDQUNHSSxRQUFTO0dBRGhELENBRDZELENBRzFEO0FBQ0g7O0FBQ0EsTUFBSUUsaUJBQWlCLENBQUNDLE1BQWxCLEtBQTZCLENBQWpDLEVBQW9DLE9BQU9ELGlCQUFQO0FBQ3BDLFFBQU1FLGVBQWUsR0FBRyxNQUFNVixNQUFNLENBQUNXLE1BQVAsQ0FDNUJILGlCQUFpQixDQUFDLENBQUQsQ0FBakIsQ0FBcUJJLGFBRE8sRUFFNUJMLFFBRjRCLENBQTlCLENBTjZELENBUzFEOztBQUNILE1BQUlHLGVBQUosRUFBcUI7QUFDbkIsV0FBT0YsaUJBQVA7QUFDRCxHQUZELE1BRU87QUFDTCxXQUFPLEVBQVA7QUFDRDtBQUNGO0FBRU0sZUFBZUssVUFBZixDQUEwQlAsUUFBMUIsRUFBb0NRLFlBQXBDLEVBQWtEO0FBQ3ZELFNBQU9aLEdBQUk7MERBQzZDSSxRQUFTLEtBQUlRLFlBQWE7R0FEbEY7QUFHRDtBQUVNLGVBQWVDLG9CQUFmLENBQW9DQyxLQUFwQyxFQUEyQztBQUNoRCxTQUFPZCxHQUFJOzJDQUM4QmMsS0FBTTtHQUQvQztBQUdEO0FBRU0sZUFBZUMsb0JBQWYsQ0FBb0NELEtBQXBDLEVBQTJDO0FBQ2hELFNBQU9kLEdBQUk7eUNBQzRCYyxLQUFNO0dBRDdDO0FBR0Q7QUFFTSxlQUFlRSxhQUFmLENBQTZCQyxNQUE3QixFQUFxQ0gsS0FBckMsRUFBNEM7QUFDakQsU0FBT2QsR0FBSTtvREFDdUNpQixNQUFPLEtBQUlILEtBQU07R0FEbkU7QUFHRDtBQUVNLGVBQWVJLGFBQWYsQ0FBNkJDLFNBQTdCLEVBQXdDQyxPQUF4QyxFQUFpREgsTUFBakQsRUFBeUQ7QUFDOUQsU0FBT2pCLEdBQUk7bUVBQ3NEbUIsU0FBVSxLQUFJQyxPQUFRLEtBQUlILE1BQU87R0FEbEc7QUFHRDtBQUVNLGVBQWVJLG9CQUFmLENBQW9DQyxTQUFwQyxFQUErQ0MsT0FBL0MsRUFBd0RDLElBQXhELEVBQThEO0FBQ25FLFNBQU94QixHQUFJOzZFQUNnRXNCLFNBQVUsS0FBSUMsT0FBUSxLQUFJQyxJQUFLO0dBRDFHO0FBR0QiLCJmaWxlIjoiLi9kYi5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbInJlcXVpcmUoJ2RvdGVudicpLmNvbmZpZygpO1xuXG5jb25zdCBhcmdvbjIgPSByZXF1aXJlKCdhcmdvbjInKTtcbmNvbnN0IHBvc3RncmVzID0gcmVxdWlyZSgncG9zdGdyZXMnKTtcbmNvbnN0IHNxbCA9IHBvc3RncmVzKCk7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRQbGFjZXMoKSB7XG4gIGNvbnN0IHBsYWNlcyA9IGF3YWl0IHNxbGBcbiAgICBzZWxlY3QgKiBmcm9tIHBsYWNlc1xuICBgO1xuICByZXR1cm4gcGxhY2VzO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2VsZWN0VXNlckJ5VXNlcm5hbWUodXNlcm5hbWUsIHBhc3N3b3JkKSB7XG4gIGNvbnN0IHVzZXJzV2l0aFVzZXJuYW1lID0gYXdhaXQgc3FsYFxuICBTRUxFQ1QgKiBGUk9NIHVzZXJzIFdIRVJFIHVzZXJuYW1lID0gJHt1c2VybmFtZX1cbiAgYDsgLy9zZWxlY3QgZnJvbSBhbHdheXMgcmV0dXJucyBhbiBhcnJheSwgZXZlbiBpZiBpdHMgb25lXG4gIC8vIGNvbnNvbGUubG9nKHVzZXJzV2l0aFVzZXJuYW1lWzBdKTtcbiAgaWYgKHVzZXJzV2l0aFVzZXJuYW1lLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHVzZXJzV2l0aFVzZXJuYW1lO1xuICBjb25zdCBwYXNzd29yZE1hdGNoZXMgPSBhd2FpdCBhcmdvbjIudmVyaWZ5KFxuICAgIHVzZXJzV2l0aFVzZXJuYW1lWzBdLnBhc3N3b3JkX2hhc2gsXG4gICAgcGFzc3dvcmQsXG4gICk7IC8vdGhpcyByZXR1cm5zIGJvb2xlYW5cbiAgaWYgKHBhc3N3b3JkTWF0Y2hlcykge1xuICAgIHJldHVybiB1c2Vyc1dpdGhVc2VybmFtZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gW107XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGluc2VydFVzZXIodXNlcm5hbWUsIHBhc3N3b3JkSGFzaCkge1xuICByZXR1cm4gc3FsYFxuICAgIElOU0VSVCBJTlRPIHVzZXJzICh1c2VybmFtZSwgcGFzc3dvcmRfaGFzaCkgVkFMVUVTICgke3VzZXJuYW1lfSwgJHtwYXNzd29yZEhhc2h9KVxuICBgO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2VsZWN0U2Vzc2lvbkJ5VG9rZW4odG9rZW4pIHtcbiAgcmV0dXJuIHNxbGBcbiAgICBTRUxFQ1QgKiBGUk9NIHNlc3Npb25zIFdIRVJFIHRva2VuID0gJHt0b2tlbn1cbiAgYDtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVNlc3Npb25CeVRva2VuKHRva2VuKSB7XG4gIHJldHVybiBzcWxgXG4gICAgREVMRVRFIEZST00gc2Vzc2lvbnMgV0hFUkUgdG9rZW4gPSAke3Rva2VufVxuICBgO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5zZXJ0U2Vzc2lvbih1c2VySWQsIHRva2VuKSB7XG4gIHJldHVybiBzcWxgXG4gICAgSU5TRVJUIElOVE8gc2Vzc2lvbnMgKHVzZXJfaWQsIHRva2VuKSBWQUxVRVMgKCR7dXNlcklkfSwgJHt0b2tlbn0pXG4gIGA7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbnNlcnRKb3VybmV5KHN0YXJ0RGF0ZSwgZW5kRGF0ZSwgdXNlcklkKSB7XG4gIHJldHVybiBzcWxgXG4gICAgSU5TRVJUIElOVE8gam91cm5leXMgKHN0YXJ0X2RhdGUsIGVuZF9kYXRlLCB1c2VyX2lkKSBWQUxVRVMgKCR7c3RhcnREYXRlfSwgJHtlbmREYXRlfSwgJHt1c2VySWR9KSBSRVRVUk5JTkcgaWQsIHN0YXJ0X2RhdGUsIGVuZF9kYXRlLCB1c2VyX2lkXG4gIGA7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbnNlcnRKb3VybmV5RW50cmllcyhqb3VybmV5SWQsIHBsYWNlSWQsIGRhdGUpIHtcbiAgcmV0dXJuIHNxbGBcbiAgICBJTlNFUlQgSU5UTyBqb3VybmV5ZW50cmllcyAoam91cm5leV9pZCwgcGxhY2VfaWQsIGRhdGUsIG9yZGVyKSBWQUxVRVMgKCR7am91cm5leUlkfSwgJHtwbGFjZUlkfSwgJHtkYXRlfSlcbiAgYDtcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./db.js\n");

/***/ })

};;