exports.ids = [0];
exports.modules = {

/***/ "./db.js":
/*!***************!*\
  !*** ./db.js ***!
  \***************/
/*! exports provided: getPlaces, selectUserByUsername, insertUser, selectSessionByToken, deleteSessionByToken, insertSession, insertJourney, insertEntries, sessionsJoinENtries, personalizedPlan */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getPlaces\", function() { return getPlaces; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectUserByUsername\", function() { return selectUserByUsername; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"insertUser\", function() { return insertUser; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectSessionByToken\", function() { return selectSessionByToken; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"deleteSessionByToken\", function() { return deleteSessionByToken; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"insertSession\", function() { return insertSession; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"insertJourney\", function() { return insertJourney; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"insertEntries\", function() { return insertEntries; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"sessionsJoinENtries\", function() { return sessionsJoinENtries; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"personalizedPlan\", function() { return personalizedPlan; });\n__webpack_require__(/*! dotenv */ \"dotenv\").config();\n\nconst argon2 = __webpack_require__(/*! argon2 */ \"argon2\");\n\nconst postgres = __webpack_require__(/*! postgres */ \"postgres\");\n\nconst sql = postgres();\nasync function getPlaces() {\n  const places = await sql`\n    select * from places\n  `;\n  return places;\n}\nasync function selectUserByUsername(username, password) {\n  const usersWithUsername = await sql`\n  SELECT * FROM users WHERE username = ${username}\n  `; //select from always returns an array, even if its one\n  // console.log(usersWithUsername[0]);\n\n  if (usersWithUsername.length === 0) return usersWithUsername;\n  const passwordMatches = await argon2.verify(usersWithUsername[0].password_hash, password); //this returns boolean\n\n  if (passwordMatches) {\n    return usersWithUsername;\n  } else {\n    return [];\n  }\n}\nasync function insertUser(username, passwordHash) {\n  return sql`\n    INSERT INTO users (username, password_hash) VALUES (${username}, ${passwordHash})\n  `;\n}\nasync function selectSessionByToken(token) {\n  return sql`\n    SELECT * FROM sessions WHERE token = ${token}\n  `;\n}\nasync function deleteSessionByToken(token) {\n  return sql`\n    DELETE FROM sessions WHERE token = ${token}\n  `;\n}\nasync function insertSession(userId, token) {\n  return sql`\n    INSERT INTO sessions (user_id, token) VALUES (${userId}, ${token})\n  `;\n}\nasync function insertJourney(startDate, endDate, token) {\n  const search = await sql`\n    SELECT user_id FROM sessions WHERE token = ${token}\n  `;\n  console.log(search);\n  const userId = search[0].user_id;\n  return sql`\n    INSERT INTO journeys (start_date, end_date, user_id) VALUES (${startDate}, ${endDate}, ${userId}) RETURNING id, start_date, end_date, user_id\n  `;\n}\n\nfunction getRandomItem(arr) {\n  return arr[Math.floor(Math.random() * arr.length)];\n}\n\nasync function insertEntries(tagIds, journeyId) {\n  // selectedTags shows me places_id column based tags_id\n  const placesAndTags = await sql`\n    SELECT places_id, tags_id FROM places_tags WHERE tags_id IN (${tagIds})\n  `;\n  console.log('placesandTags:', placesAndTags);\n  console.log('tagIds', tagIds); // tag gives a random number from the places_id column\n\n  const selectedPlacesAndTags = [];\n  tagIds.forEach(tagId => {\n    // these are the placesIds based on the tagId\n    const placesByTag = placesAndTags.filter(placeAndTag => {\n      return placeAndTag.tags_id === Number(tagId);\n    });\n    const selectedPlaceAndTag = getRandomItem(placesByTag);\n    selectedPlacesAndTags.push(selectedPlaceAndTag);\n    console.log('selectedplaces:', selectedPlacesAndTags);\n  });\n  console.log('selectedplaces:', selectedPlacesAndTags);\n  const places = selectedPlacesAndTags.map(place_id => {\n    console.log(place_id);\n    return place_id.places_id;\n  });\n  console.log('places', places);\n  const tagArray = await sql`\n    SELECT name, address, image, description FROM places WHERE id IN (${places}) \n  `;\n  console.log('tagArray', tagArray);\n  await sql`\n    INSERT INTO journeys_places (journey_id, place_id)\n    SELECT ${journeyId}, x\n      FROM unnest(ARRAY[${places}]) x\n  `;\n  return tagArray;\n}\nasync function sessionsJoinENtries(token) {\n  const trip = await sql`\n    SELECT \n      journeys.id as journey_id\n    FROM \n      sessions,\n      users,\n      journeys\n    WHERE \n      sessions.token = ${token} AND\n      users.id = sessions.user_id AND\n      journeys.user_id = users.id;\n  `;\n  console.log('meme', trip);\n  return trip;\n}\nasync function personalizedPlan(journeyId) {\n  const plan = await sql`\n    SELECT \n      places.name,  \n      places.address, \n      places.image,\n      places.description \n    FROM \n      places,\n      journeys_places \n    WHERE \n      places.id = journeys_places.place_id AND \n      journeys_places.journey_id = ${journeyId}\n  `;\n  return plan;\n} // export async function personalizedPlan(places) {\n//   const plan = await sql`\n//     SELECT * FROM places WHERE\n//   `;\n// }\n// export async function selectUserByUsername(username, password) {\n//   const usersWithUsername = await sql`\n//   SELECT * FROM users WHERE username = ${username}\n//   `; //select from always returns an array, even if its one\n//   // console.log(usersWithUsername[0]);\n//   if (usersWithUsername.length === 0) return usersWithUsername;\n//   const passwordMatches = await argon2.verify(\n//     usersWithUsername[0].password_hash,\n//     password,\n//   ); //this returns boolean\n//   if (passwordMatches) {\n//     return usersWithUsername;\n//   } else {\n//     return [];\n//   }\n// }//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9kYi5qcz8yNmY1Il0sIm5hbWVzIjpbInJlcXVpcmUiLCJjb25maWciLCJhcmdvbjIiLCJwb3N0Z3JlcyIsInNxbCIsImdldFBsYWNlcyIsInBsYWNlcyIsInNlbGVjdFVzZXJCeVVzZXJuYW1lIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsInVzZXJzV2l0aFVzZXJuYW1lIiwibGVuZ3RoIiwicGFzc3dvcmRNYXRjaGVzIiwidmVyaWZ5IiwicGFzc3dvcmRfaGFzaCIsImluc2VydFVzZXIiLCJwYXNzd29yZEhhc2giLCJzZWxlY3RTZXNzaW9uQnlUb2tlbiIsInRva2VuIiwiZGVsZXRlU2Vzc2lvbkJ5VG9rZW4iLCJpbnNlcnRTZXNzaW9uIiwidXNlcklkIiwiaW5zZXJ0Sm91cm5leSIsInN0YXJ0RGF0ZSIsImVuZERhdGUiLCJzZWFyY2giLCJjb25zb2xlIiwibG9nIiwidXNlcl9pZCIsImdldFJhbmRvbUl0ZW0iLCJhcnIiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJpbnNlcnRFbnRyaWVzIiwidGFnSWRzIiwiam91cm5leUlkIiwicGxhY2VzQW5kVGFncyIsInNlbGVjdGVkUGxhY2VzQW5kVGFncyIsImZvckVhY2giLCJ0YWdJZCIsInBsYWNlc0J5VGFnIiwiZmlsdGVyIiwicGxhY2VBbmRUYWciLCJ0YWdzX2lkIiwiTnVtYmVyIiwic2VsZWN0ZWRQbGFjZUFuZFRhZyIsInB1c2giLCJtYXAiLCJwbGFjZV9pZCIsInBsYWNlc19pZCIsInRhZ0FycmF5Iiwic2Vzc2lvbnNKb2luRU50cmllcyIsInRyaXAiLCJwZXJzb25hbGl6ZWRQbGFuIiwicGxhbiJdLCJtYXBwaW5ncyI6IkFBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBLG1CQUFPLENBQUMsc0JBQUQsQ0FBUCxDQUFrQkMsTUFBbEI7O0FBRUEsTUFBTUMsTUFBTSxHQUFHRixtQkFBTyxDQUFDLHNC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bnRlbnQiOlsicmVxdWlyZSgnZG90ZW52JykuY29uZmlnKCk7XG5cbmNvbnN0IGFyZ29uMiA9IHJlcXVpcmUoJ2FyZ29uMicpO1xuY29uc3QgcG9zdGdyZXMgPSByZXF1aXJlKCdwb3N0Z3JlcycpO1xuY29uc3Qgc3FsID0gcG9zdGdyZXMoKTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBsYWNlcygpIHtcbiAgY29uc3QgcGxhY2VzID0gYXdhaXQgc3FsYFxuICAgIHNlbGVjdCAqIGZyb20gcGxhY2VzXG4gIGA7XG4gIHJldHVybiBwbGFjZXM7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZWxlY3RVc2VyQnlVc2VybmFtZSh1c2VybmFtZSwgcGFzc3dvcmQpIHtcbiAgY29uc3QgdXNlcnNXaXRoVXNlcm5hbWUgPSBhd2FpdCBzcWxgXG4gIFNFTEVDVCAqIEZST00gdXNlcnMgV0hFUkUgdXNlcm5hbWUgPSAke3VzZXJuYW1lfVxuICBgOyAvL3NlbGVjdCBmcm9tIGFsd2F5cyByZXR1cm5zIGFuIGFycmF5LCBldmVuIGlmIGl0cyBvbmVcbiAgLy8gY29uc29sZS5sb2codXNlcnNXaXRoVXNlcm5hbWVbMF0pO1xuICBpZiAodXNlcnNXaXRoVXNlcm5hbWUubGVuZ3RoID09PSAwKSByZXR1cm4gdXNlcnNXaXRoVXNlcm5hbWU7XG4gIGNvbnN0IHBhc3N3b3JkTWF0Y2hlcyA9IGF3YWl0IGFyZ29uMi52ZXJpZnkoXG4gICAgdXNlcnNXaXRoVXNlcm5hbWVbMF0ucGFzc3dvcmRfaGFzaCxcbiAgICBwYXNzd29yZCxcbiAgKTsgLy90aGlzIHJldHVybnMgYm9vbGVhblxuICBpZiAocGFzc3dvcmRNYXRjaGVzKSB7XG4gICAgcmV0dXJuIHVzZXJzV2l0aFVzZXJuYW1lO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBbXTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5zZXJ0VXNlcih1c2VybmFtZSwgcGFzc3dvcmRIYXNoKSB7XG4gIHJldHVybiBzcWxgXG4gICAgSU5TRVJUIElOVE8gdXNlcnMgKHVzZXJuYW1lLCBwYXNzd29yZF9oYXNoKSBWQUxVRVMgKCR7dXNlcm5hbWV9LCAke3Bhc3N3b3JkSGFzaH0pXG4gIGA7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZWxlY3RTZXNzaW9uQnlUb2tlbih0b2tlbikge1xuICByZXR1cm4gc3FsYFxuICAgIFNFTEVDVCAqIEZST00gc2Vzc2lvbnMgV0hFUkUgdG9rZW4gPSAke3Rva2VufVxuICBgO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlU2Vzc2lvbkJ5VG9rZW4odG9rZW4pIHtcbiAgcmV0dXJuIHNxbGBcbiAgICBERUxFVEUgRlJPTSBzZXNzaW9ucyBXSEVSRSB0b2tlbiA9ICR7dG9rZW59XG4gIGA7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbnNlcnRTZXNzaW9uKHVzZXJJZCwgdG9rZW4pIHtcbiAgcmV0dXJuIHNxbGBcbiAgICBJTlNFUlQgSU5UTyBzZXNzaW9ucyAodXNlcl9pZCwgdG9rZW4pIFZBTFVFUyAoJHt1c2VySWR9LCAke3Rva2VufSlcbiAgYDtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGluc2VydEpvdXJuZXkoc3RhcnREYXRlLCBlbmREYXRlLCB0b2tlbikge1xuICBjb25zdCBzZWFyY2ggPSBhd2FpdCBzcWxgXG4gICAgU0VMRUNUIHVzZXJfaWQgRlJPTSBzZXNzaW9ucyBXSEVSRSB0b2tlbiA9ICR7dG9rZW59XG4gIGA7XG4gIGNvbnNvbGUubG9nKHNlYXJjaCk7XG5cbiAgY29uc3QgdXNlcklkID0gc2VhcmNoWzBdLnVzZXJfaWQ7XG5cbiAgcmV0dXJuIHNxbGBcbiAgICBJTlNFUlQgSU5UTyBqb3VybmV5cyAoc3RhcnRfZGF0ZSwgZW5kX2RhdGUsIHVzZXJfaWQpIFZBTFVFUyAoJHtzdGFydERhdGV9LCAke2VuZERhdGV9LCAke3VzZXJJZH0pIFJFVFVSTklORyBpZCwgc3RhcnRfZGF0ZSwgZW5kX2RhdGUsIHVzZXJfaWRcbiAgYDtcbn1cbmZ1bmN0aW9uIGdldFJhbmRvbUl0ZW0oYXJyKSB7XG4gIHJldHVybiBhcnJbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYXJyLmxlbmd0aCldO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5zZXJ0RW50cmllcyh0YWdJZHMsIGpvdXJuZXlJZCkge1xuICAvLyBzZWxlY3RlZFRhZ3Mgc2hvd3MgbWUgcGxhY2VzX2lkIGNvbHVtbiBiYXNlZCB0YWdzX2lkXG4gIGNvbnN0IHBsYWNlc0FuZFRhZ3MgPSBhd2FpdCBzcWxgXG4gICAgU0VMRUNUIHBsYWNlc19pZCwgdGFnc19pZCBGUk9NIHBsYWNlc190YWdzIFdIRVJFIHRhZ3NfaWQgSU4gKCR7dGFnSWRzfSlcbiAgYDtcbiAgY29uc29sZS5sb2coJ3BsYWNlc2FuZFRhZ3M6JywgcGxhY2VzQW5kVGFncyk7XG4gIGNvbnNvbGUubG9nKCd0YWdJZHMnLCB0YWdJZHMpO1xuXG4gIC8vIHRhZyBnaXZlcyBhIHJhbmRvbSBudW1iZXIgZnJvbSB0aGUgcGxhY2VzX2lkIGNvbHVtblxuICBjb25zdCBzZWxlY3RlZFBsYWNlc0FuZFRhZ3MgPSBbXTtcbiAgdGFnSWRzLmZvckVhY2goKHRhZ0lkKSA9PiB7XG4gICAgLy8gdGhlc2UgYXJlIHRoZSBwbGFjZXNJZHMgYmFzZWQgb24gdGhlIHRhZ0lkXG4gICAgY29uc3QgcGxhY2VzQnlUYWcgPSBwbGFjZXNBbmRUYWdzLmZpbHRlcigocGxhY2VBbmRUYWcpID0+IHtcbiAgICAgIHJldHVybiBwbGFjZUFuZFRhZy50YWdzX2lkID09PSBOdW1iZXIodGFnSWQpO1xuICAgIH0pO1xuICAgIGNvbnN0IHNlbGVjdGVkUGxhY2VBbmRUYWcgPSBnZXRSYW5kb21JdGVtKHBsYWNlc0J5VGFnKTtcbiAgICBzZWxlY3RlZFBsYWNlc0FuZFRhZ3MucHVzaChzZWxlY3RlZFBsYWNlQW5kVGFnKTtcbiAgICBjb25zb2xlLmxvZygnc2VsZWN0ZWRwbGFjZXM6Jywgc2VsZWN0ZWRQbGFjZXNBbmRUYWdzKTtcbiAgfSk7XG5cbiAgY29uc29sZS5sb2coJ3NlbGVjdGVkcGxhY2VzOicsIHNlbGVjdGVkUGxhY2VzQW5kVGFncyk7XG4gIGNvbnN0IHBsYWNlcyA9IHNlbGVjdGVkUGxhY2VzQW5kVGFncy5tYXAoKHBsYWNlX2lkKSA9PiB7XG4gICAgY29uc29sZS5sb2cocGxhY2VfaWQpO1xuICAgIHJldHVybiBwbGFjZV9pZC5wbGFjZXNfaWQ7XG4gIH0pO1xuXG4gIGNvbnNvbGUubG9nKCdwbGFjZXMnLCBwbGFjZXMpO1xuICBjb25zdCB0YWdBcnJheSA9IGF3YWl0IHNxbGBcbiAgICBTRUxFQ1QgbmFtZSwgYWRkcmVzcywgaW1hZ2UsIGRlc2NyaXB0aW9uIEZST00gcGxhY2VzIFdIRVJFIGlkIElOICgke3BsYWNlc30pIFxuICBgO1xuXG4gIGNvbnNvbGUubG9nKCd0YWdBcnJheScsIHRhZ0FycmF5KTtcblxuICBhd2FpdCBzcWxgXG4gICAgSU5TRVJUIElOVE8gam91cm5leXNfcGxhY2VzIChqb3VybmV5X2lkLCBwbGFjZV9pZClcbiAgICBTRUxFQ1QgJHtqb3VybmV5SWR9LCB4XG4gICAgICBGUk9NIHVubmVzdChBUlJBWVske3BsYWNlc31dKSB4XG4gIGA7XG5cbiAgcmV0dXJuIHRhZ0FycmF5O1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2Vzc2lvbnNKb2luRU50cmllcyh0b2tlbikge1xuICBjb25zdCB0cmlwID0gYXdhaXQgc3FsYFxuICAgIFNFTEVDVCBcbiAgICAgIGpvdXJuZXlzLmlkIGFzIGpvdXJuZXlfaWRcbiAgICBGUk9NIFxuICAgICAgc2Vzc2lvbnMsXG4gICAgICB1c2VycyxcbiAgICAgIGpvdXJuZXlzXG4gICAgV0hFUkUgXG4gICAgICBzZXNzaW9ucy50b2tlbiA9ICR7dG9rZW59IEFORFxuICAgICAgdXNlcnMuaWQgPSBzZXNzaW9ucy51c2VyX2lkIEFORFxuICAgICAgam91cm5leXMudXNlcl9pZCA9IHVzZXJzLmlkO1xuICBgO1xuICBjb25zb2xlLmxvZygnbWVtZScsIHRyaXApO1xuXG4gIHJldHVybiB0cmlwO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcGVyc29uYWxpemVkUGxhbihqb3VybmV5SWQpIHtcbiAgY29uc3QgcGxhbiA9IGF3YWl0IHNxbGBcbiAgICBTRUxFQ1QgXG4gICAgICBwbGFjZXMubmFtZSwgIFxuICAgICAgcGxhY2VzLmFkZHJlc3MsIFxuICAgICAgcGxhY2VzLmltYWdlLFxuICAgICAgcGxhY2VzLmRlc2NyaXB0aW9uIFxuICAgIEZST00gXG4gICAgICBwbGFjZXMsXG4gICAgICBqb3VybmV5c19wbGFjZXMgXG4gICAgV0hFUkUgXG4gICAgICBwbGFjZXMuaWQgPSBqb3VybmV5c19wbGFjZXMucGxhY2VfaWQgQU5EIFxuICAgICAgam91cm5leXNfcGxhY2VzLmpvdXJuZXlfaWQgPSAke2pvdXJuZXlJZH1cbiAgYDtcbiAgcmV0dXJuIHBsYW47XG59XG5cbi8vIGV4cG9ydCBhc3luYyBmdW5jdGlvbiBwZXJzb25hbGl6ZWRQbGFuKHBsYWNlcykge1xuLy8gICBjb25zdCBwbGFuID0gYXdhaXQgc3FsYFxuLy8gICAgIFNFTEVDVCAqIEZST00gcGxhY2VzIFdIRVJFXG4vLyAgIGA7XG4vLyB9XG4vLyBleHBvcnQgYXN5bmMgZnVuY3Rpb24gc2VsZWN0VXNlckJ5VXNlcm5hbWUodXNlcm5hbWUsIHBhc3N3b3JkKSB7XG4vLyAgIGNvbnN0IHVzZXJzV2l0aFVzZXJuYW1lID0gYXdhaXQgc3FsYFxuLy8gICBTRUxFQ1QgKiBGUk9NIHVzZXJzIFdIRVJFIHVzZXJuYW1lID0gJHt1c2VybmFtZX1cbi8vICAgYDsgLy9zZWxlY3QgZnJvbSBhbHdheXMgcmV0dXJucyBhbiBhcnJheSwgZXZlbiBpZiBpdHMgb25lXG4vLyAgIC8vIGNvbnNvbGUubG9nKHVzZXJzV2l0aFVzZXJuYW1lWzBdKTtcbi8vICAgaWYgKHVzZXJzV2l0aFVzZXJuYW1lLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHVzZXJzV2l0aFVzZXJuYW1lO1xuLy8gICBjb25zdCBwYXNzd29yZE1hdGNoZXMgPSBhd2FpdCBhcmdvbjIudmVyaWZ5KFxuLy8gICAgIHVzZXJzV2l0aFVzZXJuYW1lWzBdLnBhc3N3b3JkX2hhc2gsXG4vLyAgICAgcGFzc3dvcmQsXG4vLyAgICk7IC8vdGhpcyByZXR1cm5zIGJvb2xlYW5cbi8vICAgaWYgKHBhc3N3b3JkTWF0Y2hlcykge1xuLy8gICAgIHJldHVybiB1c2Vyc1dpdGhVc2VybmFtZTtcbi8vICAgfSBlbHNlIHtcbi8vICAgICByZXR1cm4gW107XG4vLyAgIH1cbi8vIH1cbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./db.js\n");

/***/ })

};;