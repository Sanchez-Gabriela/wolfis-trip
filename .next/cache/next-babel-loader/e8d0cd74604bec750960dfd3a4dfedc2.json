{"ast":null,"code":"var _jsxFileName = \"/Users/gabrielasanchez/projects/wolfis-trip/pages/login.tsx\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState } from 'react';\nimport Link from 'next/link';\nimport Router from 'next/router';\n\n/** @jsx jsx */\n\n/** @jsxFrag React.Fragment */\nimport { jsx, css } from '@emotion/core';\nimport Footer from '../components/Footer';\n//================================================================================\n// Style\n//================================================================================\nconst app = css`\n  min-height: 100vh;\n  font-weight: 400;\n  font-family: 'Karla', sans-serif;\n  width: 100%;\n  position: absolute;\n`;\nconst form = css`\n  background: #f7b733;\n  width: 200px;\n  position: relative;\n  margin: auto;\n  margin-top: 10%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 20px;\n  border-radius: 6px;\n`;\nconst input = css`\n  line-height: 2.5;\n  margin-bottom: 15px;\n  border-radius: 4px;\n  border: 2px solid #f7b733;\n  margin-top: 20px;\n  font-family: 'Karla', sans-serif;\n`;\nconst button = css`\n  width: 70px;\n  font-family: 'Karla', sans-serif;\n  margin: auto;\n  border-radius: 4px;\n  color: #4abdac;\n  border: 2px solid #4abdac;\n  padding: 10px;\n  font-weight: bold;\n`;\nconst forgottenPass = css`\n  text-align: center;\n  color: #555555;\n  font-size: 18px;\n  font-family: 'Karla', sans-serif;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  margin: 15px;\n  text-decoration: none;\n`;\nconst logo = css`\n  font-size: 40px;\n  color: #555555;\n  display: inline-block;\n  margin-left: 20px;\n  margin-top: 20px;\n  font-family: 'Karla', sans-serif;\n  text-decoration: none;\n  border: 2px solid #555555;\n`; //================================================================================\n// Function\n//================================================================================\n\nexport default function Login() {\n  const {\n    0: username,\n    1: setUsername\n  } = useState('');\n  const {\n    0: password,\n    1: setPassword\n  } = useState('');\n  const {\n    0: status,\n    1: setStatus\n  } = useState('');\n\n  function onSubmit(event) {\n    event.preventDefault();\n    fetch('/api/login', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        username,\n        password\n      })\n    }).then(response => {\n      if (response.ok !== true) {\n        setStatus('Failed logging in - response is not ok');\n      }\n\n      return response.json();\n    }).then(json => {\n      if (json.loggedIn === false) {\n        setStatus('Failed logging in - check username and password');\n      } else {\n        setStatus(alert('Logged in!'));\n        setTimeout(() => {\n          Router.replace('/interests');\n        }, 2000);\n      }\n    }).catch(() => {\n      setStatus('Failed logging in - request failed');\n    });\n  }\n\n  return jsx(React.Fragment, null, jsx(\"div\", {\n    css: app,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }\n  }, jsx(Link, {\n    href: '/index',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 9\n    }\n  }, jsx(\"a\", {\n    href: \"#a\",\n    css: logo,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 11\n    }\n  }, \"Wolfi\")), jsx(\"form\", {\n    method: \"POST\",\n    css: form,\n    onSubmit: onSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 9\n    }\n  }, jsx(\"input\", {\n    css: input,\n    onChange: event => setUsername(event.target.value),\n    placeholder: \"username\",\n    name: \"username\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 11\n    }\n  }), jsx(\"input\", {\n    css: input,\n    placeholder: \"Password\",\n    type: \"password\",\n    name: \"password\",\n    onChange: event => setPassword(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 11\n    }\n  }), jsx(\"button\", {\n    css: button,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 11\n    }\n  }, \" LOGIN\")), jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 9\n    }\n  }, status), jsx(\"a\", {\n    href: \"#a\",\n    css: forgottenPass,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 9\n    }\n  }, \"I forgot my password, send me an email \\u226B\"), jsx(Link, {\n    href: '/register',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 9\n    }\n  }, jsx(\"a\", {\n    href: \"#a\",\n    css: forgottenPass,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 11\n    }\n  }, \"Register \\u226B\"))), jsx(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }\n  }));\n} // export async function getServerSideProps(context: GetServerSidePropsContext) {\n//   if (nextCookies(context).token) {\n//     context.res.setHeader('location', '/');\n//     context.res.statusCode = 302;\n//     context.res.end();\n//   }\n//   return {\n//     props: {},\n//   };\n// }","map":{"version":3,"sources":["/Users/gabrielasanchez/projects/wolfis-trip/pages/login.tsx"],"names":["useState","Link","Router","jsx","css","Footer","app","form","input","button","forgottenPass","logo","Login","username","setUsername","password","setPassword","status","setStatus","onSubmit","event","preventDefault","fetch","method","headers","body","JSON","stringify","then","response","ok","json","loggedIn","alert","setTimeout","replace","catch","target","value"],"mappings":"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","sourcesContent":["import React, { useState, FormEvent } from 'react';\nimport Head from 'next/head';\nimport Link from 'next/link';\nimport Router from 'next/router';\nimport nextCookies from 'next-cookies';\n/** @jsx jsx */\n/** @jsxFrag React.Fragment */\nimport { jsx, css } from '@emotion/core';\nimport { GetServerSidePropsContext } from 'next';\nimport Footer from '../components/Footer';\nimport Cookie from 'js-cookie';\n\n//================================================================================\n// Style\n//================================================================================\n\nconst app = css`\n  min-height: 100vh;\n  font-weight: 400;\n  font-family: 'Karla', sans-serif;\n  width: 100%;\n  position: absolute;\n`;\nconst form = css`\n  background: #f7b733;\n  width: 200px;\n  position: relative;\n  margin: auto;\n  margin-top: 10%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 20px;\n  border-radius: 6px;\n`;\n\nconst input = css`\n  line-height: 2.5;\n  margin-bottom: 15px;\n  border-radius: 4px;\n  border: 2px solid #f7b733;\n  margin-top: 20px;\n  font-family: 'Karla', sans-serif;\n`;\n\nconst button = css`\n  width: 70px;\n  font-family: 'Karla', sans-serif;\n  margin: auto;\n  border-radius: 4px;\n  color: #4abdac;\n  border: 2px solid #4abdac;\n  padding: 10px;\n  font-weight: bold;\n`;\n\nconst forgottenPass = css`\n  text-align: center;\n  color: #555555;\n  font-size: 18px;\n  font-family: 'Karla', sans-serif;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  margin: 15px;\n  text-decoration: none;\n`;\n\nconst logo = css`\n  font-size: 40px;\n  color: #555555;\n  display: inline-block;\n  margin-left: 20px;\n  margin-top: 20px;\n  font-family: 'Karla', sans-serif;\n  text-decoration: none;\n  border: 2px solid #555555;\n`;\n\n//================================================================================\n// Function\n//================================================================================\nexport default function Login() {\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [status, setStatus] = useState('');\n\n  function onSubmit(event: FormEvent) {\n    event.preventDefault();\n    fetch('/api/login', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ username, password }),\n    })\n      .then((response) => {\n        if (response.ok !== true) {\n          setStatus('Failed logging in - response is not ok');\n        }\n        return response.json();\n      })\n      .then((json) => {\n        if (json.loggedIn === false) {\n          setStatus('Failed logging in - check username and password');\n        } else {\n          setStatus(alert('Logged in!'));\n          setTimeout(() => {\n            Router.replace('/interests');\n          }, 2000);\n        }\n      })\n      .catch(() => {\n        setStatus('Failed logging in - request failed');\n      });\n  }\n\n  return (\n    <>\n      <div css={app}>\n        <Link href={'/index'}>\n          <a href=\"#a\" css={logo}>\n            Wolfi\n          </a>\n        </Link>\n        <form method=\"POST\" css={form} onSubmit={onSubmit}>\n          <input\n            css={input}\n            onChange={(event) => setUsername(event.target.value)}\n            placeholder=\"username\"\n            name=\"username\"\n          />\n\n          <input\n            css={input}\n            placeholder=\"Password\"\n            type=\"password\"\n            name=\"password\"\n            onChange={(event) => setPassword(event.target.value)}\n          />\n          <button css={button}> LOGIN</button>\n        </form>\n        <p>{status}</p>\n        <a href=\"#a\" css={forgottenPass}>\n          I forgot my password, send me an email &#x0226B;\n        </a>\n        <Link href={'/register'}>\n          <a href=\"#a\" css={forgottenPass}>\n            Register &#x0226B;\n          </a>\n        </Link>\n      </div>\n      <Footer />\n    </>\n  );\n}\n\n// export async function getServerSideProps(context: GetServerSidePropsContext) {\n//   if (nextCookies(context).token) {\n//     context.res.setHeader('location', '/');\n//     context.res.statusCode = 302;\n//     context.res.end();\n//   }\n\n//   return {\n//     props: {},\n//   };\n// }\n"]},"metadata":{},"sourceType":"module"}