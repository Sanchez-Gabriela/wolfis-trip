{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { useState } from 'react';\nimport Link from 'next/link';\nimport Header from '../components/Header';\nimport Router from 'next/router';\nimport nextCookies from 'next-cookies';\n/** @jsx jsx */\n\n/** @jsxFrag React.Fragment */\n\nimport { jsx, css } from '@emotion/core';\n//================================================================================\n// Style\n//================================================================================\nconst app = css`\n  background: #4abdac;\n  min-height: 100vh;\n  font-weight: 400;\n  font-family: 'Karla', sans-serif;\n  width: 100%;\n  position: absolute;\n`;\nconst form = css`\n  background: #f7b733;\n  width: 200px;\n  position: relative;\n  margin: auto;\n  margin-top: 10%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 20px;\n  border-radius: 6px;\n`;\nconst input = css`\n  line-height: 2.5;\n  margin-bottom: 15px;\n  border-radius: 4px;\n  border: 2px solid #f7b733;\n  margin-top: 20px;\n  font-family: 'Karla', sans-serif;\n`;\nconst button = css`\n  border-radius: 4px;\n  font-family: 'Karla', sans-serif;\n  font-size: 18px;\n  margin-top: 10px;\n  background: #ffff;\n  border: 2px solid #2f4f4f;\n`;\nconst forgottenPass = css`\n  text-align: center;\n  color: #323339;\n  font-size: 18px;\n  font-family: 'Karla', sans-serif;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  margin: 15px;\n  text-decoration: none;\n`;\nconst logo = css`\n  font-size: 40px;\n  color: #fc4a1a;\n  display: inline-block;\n  margin-left: 20px;\n  margin-top: 20px;\n  font-family: 'Karla', sans-serif;\n  text-decoration: none;\n  border: 2px solid #fc4a1a;\n`; //================================================================================\n// Function\n//================================================================================\n\nexport default function Login() {\n  const {\n    0: username,\n    1: setUsername\n  } = useState('');\n  const {\n    0: password,\n    1: setPassword\n  } = useState('');\n  const {\n    0: status,\n    1: setStatus\n  } = useState('');\n\n  function onSubmit(event) {\n    event.preventDefault();\n    fetch('/api/login', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        username,\n        password\n      })\n    }).then(response => {\n      if (response.ok !== true) {\n        setStatus('Failed logging in - response is not ok');\n      }\n\n      return response.json();\n    }).then(json => {\n      if (json.loggedIn === false) {\n        setStatus('Failed logging in - check username and password');\n      } else {\n        setStatus('Logged in!');\n        setTimeout(() => {\n          Router.replace('/');\n        }, 2000);\n      }\n    }).catch(() => {\n      setStatus('Failed logging in - request failed');\n    });\n  }\n\n  return jsx(React.Fragment, null, jsx(Header, null), jsx(\"div\", {\n    css: app\n  }, jsx(Link, {\n    href: '/index'\n  }, jsx(\"a\", {\n    href: \"#a\",\n    css: logo\n  }, \"Wolfi\")), jsx(\"form\", {\n    method: \"POST\",\n    css: form,\n    onSubmit: onSubmit\n  }, jsx(\"input\", {\n    css: input,\n    onChange: event => setUsername(event.target.value),\n    placeholder: \"username\",\n    name: \"username\"\n  }), jsx(\"input\", {\n    css: input,\n    placeholder: \"Password\",\n    type: \"password\",\n    name: \"password\",\n    pattern: \"[0-9]{3}-[0-9]{3}-[0-9]{4}\",\n    onChange: event => setPassword(event.target.value)\n  }), jsx(\"button\", {\n    css: button,\n    type: \"button\"\n  }, ' ', \"LOGIN\")), status, jsx(\"a\", {\n    href: \"#a\",\n    css: forgottenPass\n  }, \"I forgot my password, send me an email \\u226B\"), jsx(Link, {\n    href: '/register'\n  }, jsx(\"a\", {\n    href: \"#a\",\n    css: forgottenPass\n  }, \"Register \\u226B\"))));\n}\nexport async function getServerSideProps(context) {\n  if (nextCookies(context).token) {\n    context.res.setHeader('location', '/interest');\n    context.res.statusCode = 302;\n    context.res.end();\n  }\n\n  return {\n    props: {}\n  };\n}","map":null,"metadata":{},"sourceType":"module"}