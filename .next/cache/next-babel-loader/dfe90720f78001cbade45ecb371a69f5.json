{"ast":null,"code":"var _jsxFileName = \"/Users/gabrielasanchez/projects/wolfis-trip/pages/login.tsx\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState } from 'react';\nimport Link from 'next/link';\nimport Header from '../components/Header';\nimport Router from 'next/router';\nimport nextCookies from 'next-cookies';\n/** @jsx jsx */\n\n/** @jsxFrag React.Fragment */\n\nimport { jsx, css } from '@emotion/core';\n//================================================================================\n// Style\n//================================================================================\nconst app = css`\n  background: #4abdac;\n  min-height: 100vh;\n  font-weight: 400;\n  font-family: 'Karla', sans-serif;\n  width: 100%;\n  position: absolute;\n`;\nconst form = css`\n  background: #f7b733;\n  width: 200px;\n  position: relative;\n  margin: auto;\n  margin-top: 10%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 20px;\n  border-radius: 6px;\n`;\nconst input = css`\n  line-height: 2.5;\n  margin-bottom: 15px;\n  border-radius: 4px;\n  border: 2px solid #f7b733;\n  margin-top: 20px;\n  font-family: 'Karla', sans-serif;\n`;\nconst button = css`\n  border-radius: 4px;\n  font-family: 'Karla', sans-serif;\n  font-size: 18px;\n  margin-top: 10px;\n  background: #ffff;\n  border: 2px solid #2f4f4f;\n`;\nconst forgottenPass = css`\n  text-align: center;\n  color: #323339;\n  font-size: 18px;\n  font-family: 'Karla', sans-serif;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  margin: 15px;\n  text-decoration: none;\n`;\nconst logo = css`\n  font-size: 40px;\n  color: #fc4a1a;\n  display: inline-block;\n  margin-left: 20px;\n  margin-top: 20px;\n  font-family: 'Karla', sans-serif;\n  text-decoration: none;\n  border: 2px solid #fc4a1a;\n`; //================================================================================\n// Function\n//================================================================================\n\nexport default function Login() {\n  const {\n    0: username,\n    1: setUsername\n  } = useState('');\n  const {\n    0: password,\n    1: setPassword\n  } = useState('');\n  const {\n    0: status,\n    1: setStatus\n  } = useState('');\n\n  function onSubmit(event) {\n    event.preventDefault();\n    fetch('/api/login', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        username,\n        password\n      })\n    }).then(response => {\n      if (response.ok !== true) {\n        setStatus('Failed logging in - response is not ok');\n      }\n\n      return response.json();\n    }).then(json => {\n      if (json.loggedIn === false) {\n        setStatus('Failed logging in - check username and password');\n      } else {\n        setStatus('Logged in!');\n        setTimeout(() => {\n          Router.replace('/');\n        }, 2000);\n      }\n    }).catch(() => {\n      setStatus('Failed logging in - request failed');\n    });\n  }\n\n  return jsx(React.Fragment, null, jsx(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }\n  }), jsx(\"div\", {\n    css: app,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }\n  }, jsx(Link, {\n    href: '/index',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 9\n    }\n  }, jsx(\"a\", {\n    href: \"#a\",\n    css: logo,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 11\n    }\n  }, \"Wolfi\")), jsx(\"form\", {\n    method: \"POST\",\n    css: form,\n    onSubmit: onSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 9\n    }\n  }, jsx(\"input\", {\n    css: input,\n    onChange: event => setUsername(event.target.value),\n    placeholder: \"username\",\n    name: \"username\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 11\n    }\n  }), jsx(\"input\", {\n    css: input,\n    placeholder: \"Password\",\n    type: \"password\",\n    name: \"password\",\n    pattern: \"[0-9]{3}-[0-9]{3}-[0-9]{4}\",\n    onChange: event => setPassword(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 11\n    }\n  }), jsx(\"button\", {\n    css: button,\n    type: \"button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 11\n    }\n  }, ' ', \"LOGIN\")), status, jsx(\"a\", {\n    href: \"#a\",\n    css: forgottenPass,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 9\n    }\n  }, \"I forgot my password, send me an email \\u226B\"), jsx(Link, {\n    href: '/register',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 9\n    }\n  }, jsx(\"a\", {\n    href: \"#a\",\n    css: forgottenPass,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 11\n    }\n  }, \"Register \\u226B\"))));\n}\nexport async function getServerSideProps(context) {\n  if (nextCookies(context).token) {\n    context.res.setHeader('location', '/interest');\n    context.res.statusCode = 302;\n    context.res.end();\n  }\n\n  return {\n    props: {}\n  };\n}","map":{"version":3,"sources":["/Users/gabrielasanchez/projects/wolfis-trip/pages/login.tsx"],"names":["useState","Link","Header","Router","nextCookies","jsx","css","app","form","input","button","forgottenPass","logo","Login","username","setUsername","password","setPassword","status","setStatus","onSubmit","event","preventDefault","fetch","method","headers","body","JSON","stringify","then","response","ok","json","loggedIn","setTimeout","replace","catch","target","value","getServerSideProps","context","token","res","setHeader","statusCode","end","props"],"mappings":"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","sourcesContent":["import React, { useState, FormEvent } from 'react';\nimport Head from 'next/head';\nimport Link from 'next/link';\nimport Header from '../components/Header';\nimport Router from 'next/router';\nimport nextCookies from 'next-cookies';\n/** @jsx jsx */\n/** @jsxFrag React.Fragment */\nimport { jsx, css } from '@emotion/core';\nimport { GetServerSidePropsContext } from 'next';\n\nimport { loadGetInitialProps } from 'next/dist/next-server/lib/utils';\n\n//================================================================================\n// Style\n//================================================================================\n\nconst app = css`\n  background: #4abdac;\n  min-height: 100vh;\n  font-weight: 400;\n  font-family: 'Karla', sans-serif;\n  width: 100%;\n  position: absolute;\n`;\nconst form = css`\n  background: #f7b733;\n  width: 200px;\n  position: relative;\n  margin: auto;\n  margin-top: 10%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 20px;\n  border-radius: 6px;\n`;\n\nconst input = css`\n  line-height: 2.5;\n  margin-bottom: 15px;\n  border-radius: 4px;\n  border: 2px solid #f7b733;\n  margin-top: 20px;\n  font-family: 'Karla', sans-serif;\n`;\n\nconst button = css`\n  border-radius: 4px;\n  font-family: 'Karla', sans-serif;\n  font-size: 18px;\n  margin-top: 10px;\n  background: #ffff;\n  border: 2px solid #2f4f4f;\n`;\n\nconst forgottenPass = css`\n  text-align: center;\n  color: #323339;\n  font-size: 18px;\n  font-family: 'Karla', sans-serif;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  margin: 15px;\n  text-decoration: none;\n`;\n\nconst logo = css`\n  font-size: 40px;\n  color: #fc4a1a;\n  display: inline-block;\n  margin-left: 20px;\n  margin-top: 20px;\n  font-family: 'Karla', sans-serif;\n  text-decoration: none;\n  border: 2px solid #fc4a1a;\n`;\n\n//================================================================================\n// Function\n//================================================================================\nexport default function Login() {\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [status, setStatus] = useState('');\n\n  function onSubmit(event: FormEvent) {\n    event.preventDefault();\n    fetch('/api/login', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ username, password }),\n    })\n      .then((response) => {\n        if (response.ok !== true) {\n          setStatus('Failed logging in - response is not ok');\n        }\n        return response.json();\n      })\n      .then((json) => {\n        if (json.loggedIn === false) {\n          setStatus('Failed logging in - check username and password');\n        } else {\n          setStatus('Logged in!');\n          setTimeout(() => {\n            Router.replace('/');\n          }, 2000);\n        }\n      })\n      .catch(() => {\n        setStatus('Failed logging in - request failed');\n      });\n  }\n\n  return (\n    <>\n      <Header />\n      <div css={app}>\n        <Link href={'/index'}>\n          <a href=\"#a\" css={logo}>\n            Wolfi\n          </a>\n        </Link>\n        <form method=\"POST\" css={form} onSubmit={onSubmit}>\n          <input\n            css={input}\n            onChange={(event) => setUsername(event.target.value)}\n            placeholder=\"username\"\n            name=\"username\"\n          />\n\n          <input\n            css={input}\n            placeholder=\"Password\"\n            type=\"password\"\n            name=\"password\"\n            pattern=\"[0-9]{3}-[0-9]{3}-[0-9]{4}\"\n            onChange={(event) => setPassword(event.target.value)}\n          />\n          <button css={button} type=\"button\">\n            {' '}\n            LOGIN\n          </button>\n        </form>\n        {status}\n        <a href=\"#a\" css={forgottenPass}>\n          I forgot my password, send me an email &#x0226B;\n        </a>\n        <Link href={'/register'}>\n          <a href=\"#a\" css={forgottenPass}>\n            Register &#x0226B;\n          </a>\n        </Link>\n      </div>\n    </>\n  );\n}\n\nexport async function getServerSideProps(context: GetServerSidePropsContext) {\n  if (nextCookies(context).token) {\n    context.res.setHeader('location', '/interest');\n    context.res.statusCode = 302;\n    context.res.end();\n  }\n\n  return {\n    props: {},\n  };\n}\n"]},"metadata":{},"sourceType":"module"}