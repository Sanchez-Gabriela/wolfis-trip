{"ast":null,"code":"var _jsxFileName = \"/Users/gabrielasanchez/projects/wolfis-trip/pages/interests.js\";\nvar __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport MultiSelect from 'react-multi-select-component';\n/** @jsx jsx */\n\n/** @jsxFrag React.Fragment */\n\nimport { jsx, css } from '@emotion/core';\nimport Link from 'next/link';\nimport Footer from '../components/Footer';\nimport Datepicker from '../components/Datepicker';\nimport Header from '../components/Header';\nimport { START_DATE } from '@datepicker-react/hooks';\nimport Cookie from 'js-cookie'; //================================================================================\n// Style\n//================================================================================\n\nconst app = css`\n  min-height: 100vh;\n  font-weight: 400;\n  font-family: 'Karla', sans-serif;\n  width: 100%;\n  position: relative;\n`; // .container {\n//   min-height: 100vh;\n//   padding: 0 0.5rem;\n//   display: flex;\n//   flex-direction: column;\n//   justify-content: center;\n//   align-items: center;\n// }\n// main {\n//   padding: 5rem 0;\n//   flex: 1;\n//   display: flex;\n//   flex-direction: column;\n//   justify-content: center;\n//   align-items: center;\n//   padding-top: 20px;\n// }\n\nconst h2 = css`\n  color: #4abdac;\n  font-family: 'Karla', sans-serif;\n  letter-spacing: 0.1em;\n  text-align: center;\n  border-bottom: 2px solid #f7b733;\n  border-top: 2px solid #f7b733;\n  padding-top: 10px;\n  padding-bottom: 10px;\n`;\nconst dropdown = css`\n  width: 50%;\n  margin: auto;\n`;\nconst readyToGo = css`\n  color: #f7b733;\n  font-size: 40px;\n  text-decoration: none;\n  font-family: 'Karla', sans-serif;\n  margin-left: 40%;\n`;\nconst calendar = css`\n  margin: auto;\n`;\nconst main = css`\n  display: flex;\n  flex-direction: column;\n  margin-top: 50px;\n`;\nconst divToGo = css``;\nconst button = css`\n  width: 5%;\n  font-family: 'Karla', sans-serif;\n  margin: auto;\n  margin-top: 40px;\n  border-radius: 4px;\n  color: #4abdac;\n  border: 2px solid #4abdac;\n  padding: 10px;\n  font-weight: bold;\n  margin-bottom: 30px;\n`;\nconst selectButton = css`\n  width: 70px;\n  font-family: 'Karla', sans-serif;\n  text-align: center;\n  margin-top: 40px;\n  border-radius: 4px;\n  color: #4abdac;\n  border: 2px solid #4abdac;\n  padding: 10px;\n  font-weight: bold;\n  margin-bottom: 30px;\n`;\nconst tags = css`\n  height: 500px;\n`; //================================================================================\n// Function\n//================================================================================\n\nexport default function Interests() {\n  // fetch(\n  //   'https://data.wien.gv.at/daten/geo?service=WFS&request=GetFeature&version=1.1.0&typeName=ogdwien:SPAZIERPUNKTOGD &srsName=EPSG:4326&outputFormat=json',\n  // )\n  //   .then((res) => res.json())\n  //   .then((json) => console.log(json));\n  const options = [{\n    value: '1',\n    label: 'sights'\n  }, {\n    value: '2',\n    label: 'classical music'\n  }, {\n    value: '3',\n    label: 'palaces'\n  }, {\n    value: '4',\n    label: 'parks'\n  }, {\n    value: '5',\n    label: 'churchs'\n  }, {\n    value: '6',\n    label: 'markets'\n  }, {\n    value: '7',\n    label: 'coffee houses'\n  }, {\n    value: '8',\n    label: 'typical food'\n  }, {\n    value: '9',\n    label: 'vegan food'\n  }, {\n    value: '10',\n    label: 'museums'\n  }, {\n    value: '11',\n    label: 'theaters'\n  }, {\n    value: '12',\n    label: 'clubs'\n  }]; //multiselector\n\n  const {\n    0: selected,\n    1: setSelected\n  } = useState([]); //calendar\n\n  const {\n    0: state,\n    1: setState\n  } = useState({\n    startDate: null,\n    endDate: null,\n    focusedInput: START_DATE\n  });\n\n  if (state.startDate !== null && state.endDate !== null) {\n    let userFirstDate = state.startDate;\n    let userSecondDate = state.endDate; // adjust 0 before single digit date\n\n    let firstDay = ('0' + userFirstDate.getDate()).slice(-2);\n    let secondDay = ('0' + userSecondDate.getDate()).slice(-2); // current month\n\n    let firstMonth = ('0' + (userFirstDate.getMonth() + 1)).slice(-2);\n    let secondMonth = ('0' + (userFirstDate.getMonth() + 1)).slice(-2); // current year\n\n    let year = userFirstDate.getFullYear(); // prints date in YYYY-MM-DD format\n\n    const firstJourneyDay = firstMonth + '-' + firstDay + '-' + year;\n    const secondJourneyDay = secondMonth + '-' + secondDay + '-' + year;\n    const date1 = new Date(firstJourneyDay);\n    const date2 = new Date(secondJourneyDay);\n    const diffTime = Math.abs(date2 - date1);\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 18));\n    alert('You have selected ' + diffDays + ' day(s)');\n  }\n\n  const {\n    0: journeyId,\n    1: setJourneyId\n  } = useState(); // const getDaysArray = function (s, e) {\n  //   for (var a = [], d = new Date(s); d <= e; d.setDate(d.getDate() + 1)) {\n  //     a.push(new Date(d));\n  //   }\n  //   return a;\n  // };\n  // const daylist = getDaysArray(new Date('2018-05-01'), new Date('2018-07-01'));\n  // daylist.map((v) => v.toISOString().slice(0, 10)).join('');\n  // console.log(daylist);\n\n  return jsx(React.Fragment, null, jsx(\"style\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 7\n    }\n  }, \"@import url('https://fonts.googleapis.com/css2?family=Karla&display=swap');\"), jsx(\"div\", {\n    css: app,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 7\n    }\n  }, jsx(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 9\n    }\n  }), jsx(\"div\", {\n    css: main,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 9\n    }\n  }, jsx(\"h2\", {\n    css: h2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 11\n    }\n  }, \"1. Choose your dates \"), jsx(\"div\", {\n    css: calendar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 11\n    }\n  }, jsx(Datepicker, {\n    state: state,\n    setState: setState,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 13\n    }\n  })), jsx(\"button\", {\n    css: button,\n    onClick: () => {\n      fetch('/api/journey', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          startDate: state.startDate.toISOString().split('T')[0],\n          endDate: state.endDate.toISOString().split('T')[0],\n          token: Cookie.get('token')\n        }) // body data type must match \"Content-Type\" header\n\n      }).then(response => {\n        console.log(response);\n        return response.json();\n      }).then(json => {\n        console.log(json.id);\n        setJourneyId(json.id);\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 11\n    }\n  }, \"submit\"), jsx(\"div\", {\n    css: tags,\n    hidden: !journeyId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 11\n    }\n  }, jsx(\"h2\", {\n    css: h2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 13\n    }\n  }, \"2. What are your interests:\"), jsx(\"div\", {\n    css: dropdown,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 13\n    }\n  }, jsx(\"pre\", {\n    hidden: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 15\n    }\n  }, JSON.stringify(selected)), jsx(MultiSelect, {\n    options: options,\n    value: selected,\n    onChange: setSelected,\n    labelledBy: 'Select',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 15\n    }\n  }), jsx(\"button\", {\n    onClick: () => {\n      fetch('/api/tags', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Accept: 'application/json'\n        },\n        body: JSON.stringify({\n          placeIds: selected.map(tag => {\n            return tag.value;\n          }),\n          journeyId: journeyId\n        }) // body data type must match \"Content-Type\" header\n\n      }).then(response => {\n        console.log(response);\n        return response.json();\n      }).then(json => {\n        console.log(json);\n        JSON.stringify(json);\n      });\n    },\n    css: selectButton,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 15\n    }\n  }, \"submit\")))), jsx(\"div\", {\n    css: divToGo,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 9\n    }\n  }, jsx(Link, {\n    href: '/journey/' + journeyId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 11\n    }\n  }, jsx(\"a\", {\n    href: \"#a\",\n    css: readyToGo,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 13\n    }\n  }, \"Get your plan! \\u226B\"))), jsx(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 9\n    }\n  })));\n}","map":{"version":3,"sources":["/Users/gabrielasanchez/projects/wolfis-trip/pages/interests.js"],"names":["React","useState","MultiSelect","jsx","css","Link","Footer","Datepicker","Header","START_DATE","Cookie","app","h2","dropdown","readyToGo","calendar","main","divToGo","button","selectButton","tags","Interests","options","value","label","selected","setSelected","state","setState","startDate","endDate","focusedInput","userFirstDate","userSecondDate","firstDay","getDate","slice","secondDay","firstMonth","getMonth","secondMonth","year","getFullYear","firstJourneyDay","secondJourneyDay","date1","Date","date2","diffTime","Math","abs","diffDays","ceil","alert","journeyId","setJourneyId","fetch","method","headers","body","JSON","stringify","toISOString","split","token","get","then","response","console","log","json","id","Accept","placeIds","map","tag"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport MultiSelect from 'react-multi-select-component';\n/** @jsx jsx */\n/** @jsxFrag React.Fragment */\nimport { jsx, css } from '@emotion/core';\nimport Link from 'next/link';\nimport Footer from '../components/Footer';\nimport Datepicker from '../components/Datepicker';\nimport Header from '../components/Header';\nimport { START_DATE } from '@datepicker-react/hooks';\nimport Cookie from 'js-cookie';\n\n//================================================================================\n// Style\n//================================================================================\n\nconst app = css`\n  min-height: 100vh;\n  font-weight: 400;\n  font-family: 'Karla', sans-serif;\n  width: 100%;\n  position: relative;\n`;\n\n// .container {\n//   min-height: 100vh;\n//   padding: 0 0.5rem;\n//   display: flex;\n//   flex-direction: column;\n//   justify-content: center;\n//   align-items: center;\n// }\n// main {\n//   padding: 5rem 0;\n//   flex: 1;\n//   display: flex;\n//   flex-direction: column;\n//   justify-content: center;\n//   align-items: center;\n//   padding-top: 20px;\n// }\n\nconst h2 = css`\n  color: #4abdac;\n  font-family: 'Karla', sans-serif;\n  letter-spacing: 0.1em;\n  text-align: center;\n  border-bottom: 2px solid #f7b733;\n  border-top: 2px solid #f7b733;\n  padding-top: 10px;\n  padding-bottom: 10px;\n`;\n\nconst dropdown = css`\n  width: 50%;\n  margin: auto;\n`;\n\nconst readyToGo = css`\n  color: #f7b733;\n  font-size: 40px;\n  text-decoration: none;\n  font-family: 'Karla', sans-serif;\n  margin-left: 40%;\n`;\n\nconst calendar = css`\n  margin: auto;\n`;\n\nconst main = css`\n  display: flex;\n  flex-direction: column;\n  margin-top: 50px;\n`;\n\nconst divToGo = css``;\n\nconst button = css`\n  width: 5%;\n  font-family: 'Karla', sans-serif;\n  margin: auto;\n  margin-top: 40px;\n  border-radius: 4px;\n  color: #4abdac;\n  border: 2px solid #4abdac;\n  padding: 10px;\n  font-weight: bold;\n  margin-bottom: 30px;\n`;\n\nconst selectButton = css`\n  width: 70px;\n  font-family: 'Karla', sans-serif;\n  text-align: center;\n  margin-top: 40px;\n  border-radius: 4px;\n  color: #4abdac;\n  border: 2px solid #4abdac;\n  padding: 10px;\n  font-weight: bold;\n  margin-bottom: 30px;\n`;\n\nconst tags = css`\n  height: 500px;\n`;\n\n//================================================================================\n// Function\n//================================================================================\n\nexport default function Interests() {\n  // fetch(\n  //   'https://data.wien.gv.at/daten/geo?service=WFS&request=GetFeature&version=1.1.0&typeName=ogdwien:SPAZIERPUNKTOGD &srsName=EPSG:4326&outputFormat=json',\n  // )\n  //   .then((res) => res.json())\n  //   .then((json) => console.log(json));\n\n  const options = [\n    { value: '1', label: 'sights' },\n    { value: '2', label: 'classical music' },\n    { value: '3', label: 'palaces' },\n    { value: '4', label: 'parks' },\n    { value: '5', label: 'churchs' },\n    { value: '6', label: 'markets' },\n    { value: '7', label: 'coffee houses' },\n    { value: '8', label: 'typical food' },\n    { value: '9', label: 'vegan food' },\n    { value: '10', label: 'museums' },\n    { value: '11', label: 'theaters' },\n    { value: '12', label: 'clubs' },\n  ];\n\n  //multiselector\n  const [selected, setSelected] = useState([]);\n\n  //calendar\n  const [state, setState] = useState({\n    startDate: null,\n    endDate: null,\n    focusedInput: START_DATE,\n  });\n\n  if (state.startDate !== null && state.endDate !== null) {\n    let userFirstDate = state.startDate;\n    let userSecondDate = state.endDate;\n\n    // adjust 0 before single digit date\n    let firstDay = ('0' + userFirstDate.getDate()).slice(-2);\n    let secondDay = ('0' + userSecondDate.getDate()).slice(-2);\n\n    // current month\n    let firstMonth = ('0' + (userFirstDate.getMonth() + 1)).slice(-2);\n    let secondMonth = ('0' + (userFirstDate.getMonth() + 1)).slice(-2);\n\n    // current year\n    let year = userFirstDate.getFullYear();\n\n    // prints date in YYYY-MM-DD format\n    const firstJourneyDay = firstMonth + '-' + firstDay + '-' + year;\n    const secondJourneyDay = secondMonth + '-' + secondDay + '-' + year;\n\n    const date1 = new Date(firstJourneyDay);\n    const date2 = new Date(secondJourneyDay);\n    const diffTime = Math.abs(date2 - date1);\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 18));\n    alert('You have selected ' + diffDays + ' day(s)');\n  }\n\n  const [journeyId, setJourneyId] = useState();\n\n  // const getDaysArray = function (s, e) {\n  //   for (var a = [], d = new Date(s); d <= e; d.setDate(d.getDate() + 1)) {\n  //     a.push(new Date(d));\n  //   }\n  //   return a;\n  // };\n\n  // const daylist = getDaysArray(new Date('2018-05-01'), new Date('2018-07-01'));\n  // daylist.map((v) => v.toISOString().slice(0, 10)).join('');\n  // console.log(daylist);\n\n  return (\n    <>\n      <style>\n        @import\n        url('https://fonts.googleapis.com/css2?family=Karla&display=swap');\n      </style>\n      <div css={app}>\n        <Header />\n        <div css={main}>\n          <h2 css={h2}>1. Choose your dates </h2>\n          <div css={calendar}>\n            <Datepicker state={state} setState={setState} />\n          </div>\n          <button\n            css={button}\n            onClick={() => {\n              fetch('/api/journey', {\n                method: 'POST',\n                headers: {\n                  'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({\n                  startDate: state.startDate.toISOString().split('T')[0],\n                  endDate: state.endDate.toISOString().split('T')[0],\n                  token: Cookie.get('token'),\n                }), // body data type must match \"Content-Type\" header\n              })\n                .then((response) => {\n                  console.log(response);\n                  return response.json();\n                })\n                .then((json) => {\n                  console.log(json.id);\n                  setJourneyId(json.id);\n                });\n            }}\n          >\n            submit\n          </button>\n          <div css={tags} hidden={!journeyId}>\n            <h2 css={h2}>2. What are your interests:</h2>\n            <div css={dropdown}>\n              <pre hidden>{JSON.stringify(selected)}</pre>\n              <MultiSelect\n                options={options}\n                value={selected}\n                onChange={setSelected}\n                labelledBy={'Select'}\n              />\n              <button\n                onClick={() => {\n                  fetch('/api/tags', {\n                    method: 'POST',\n                    headers: {\n                      'Content-Type': 'application/json',\n                      Accept: 'application/json',\n                    },\n                    body: JSON.stringify({\n                      placeIds: selected.map((tag) => {\n                        return tag.value;\n                      }),\n                      journeyId: journeyId,\n                    }), // body data type must match \"Content-Type\" header\n                  })\n                    .then((response) => {\n                      console.log(response);\n                      return response.json();\n                    })\n                    .then((json) => {\n                      console.log(json);\n                      JSON.stringify(json);\n                    });\n                }}\n                css={selectButton}\n              >\n                submit\n              </button>\n            </div>\n          </div>\n        </div>\n        <div css={divToGo}>\n          <Link href={'/journey/' + journeyId}>\n            <a href=\"#a\" css={readyToGo}>\n              Get your plan! &#x0226B;\n            </a>\n          </Link>\n        </div>\n        <Footer />\n      </div>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}